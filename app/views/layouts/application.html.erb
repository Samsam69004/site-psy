<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <!-- SEO -->
    <title>Fr√©d√©rique Granjon ‚Äì Psychoth√©rapeute √† Lyon | M√©thode APsySE</title>
    <meta name="description" content="Fr√©d√©rique Granjon, psychoth√©rapeute √† Lyon, propose un accompagnement th√©rapeutique et holistique fond√© sur l‚ÄôAPsySE : Analyse Psycho Somato √ânerg√©tique.">

    <!-- Robots -->
    <meta name="robots" content="index, follow">

    <!-- Tailwind CSS -->
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload", media: "all" %>

    <!-- JS Modern -->
    <%= javascript_include_tag "application", type: "module", "data-turbo-track": "reload" %>

    <!-- JS fallback pour anciens navigateurs -->
    <%= javascript_include_tag "legacy", nomodule: true %>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Serif+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <!-- AOS -->
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <%= favicon_link_tag 'favicon.ico' %>
    <%= tag.link rel: "manifest", href: "/site.webmanifest" %>
  </head>

  <body class="relative text-gray-800">
    <!-- Message pour navigateurs non support√©s -->
    <noscript>
      <div style="background: #fee; color: #b00; padding: 1rem; text-align: center;">
        Votre navigateur ne prend pas en charge JavaScript ou est trop ancien pour afficher ce site correctement.
        Veuillez le mettre √† jour pour une meilleure exp√©rience.
      </div>
    </noscript>

    <div class="absolute inset-0 z-0 bg-no-repeat bg-cover" style="background-image: url('<%= image_path("papier-peint.jpg") %>'); opacity: 0.04;"></div>

    <main class="relative z-10">
      <!-- Navbar -->
      <header class="fixed top-0 left-0 w-full z-50 bg-green-600 shadow-md text-white">
        <div class="max-w-7xl mx-auto flex flex-wrap items-center justify-between px-4 py-3">
          <%= image_tag "logomaman.png", alt: "Logo Fr√©d√©rique Granjon", class: "h-10 w-auto mr-4" %>

          <nav class="flex flex-wrap justify-center gap-x-4 gap-y-2 text-sm sm:text-base text-white text-center w-full sm:w-auto">
            <% ["accueil", "parcours", "outils", "cabinet", "cequejepropose", "avis", "contact"].each do |section| %>
              <%= link_to section.upcase.gsub("CEQUEJEPROPOSE", "CE QUE JE PROPOSE"), root_path(anchor: section),
                class: "block relative pb-1 hover:text-white transition duration-300 after:content-[''] after:absolute after:left-0 after:-bottom-1 after:h-[2px] after:w-0 after:bg-white after:transition-all after:duration-300 hover:after:w-full",
                aria: { label: "Aller √† la section #{section}" } %>
            <% end %>
          </nav>
        </div>
      </header>

      <!-- Main content -->
      <div class="pt-24">
        <%= yield %>
      </div>

      <!-- Flash messages -->
      <% if notice %>
        <div class="flash-notice text-white bg-green-500 py-2 text-center">
          <%= notice %>
        </div>
      <% end %>
      <% if alert %>
        <div id="flash-alert" class="text-white bg-red-500 py-2 text-center">
          <%= alert %>
        </div>
      <% end %>

      <!-- Footer -->
      <footer class="bg-white border-t border-gray-200 text-center text-sm text-green-800 py-6 shadow-inner">
        <p class="mb-1">
          Site r√©alis√© par
          <a href="https://www.linkedin.com/in/sami-chabane-085881151/" target="_blank" rel="noopener" class="text-green-600 font-semibold hover:underline">
            Sami Chabane
          </a> ‚Äî D√©veloppeur web full stack üíª
        </p>
        <p class="mb-1">&copy; <%= Time.current.year %> Fr√©d√©rique Granjon ‚Äî Tous droits r√©serv√©s.</p>
        <p class="mb-1">SIRET : <span class="font-semibold">81917677700012</span></p>
        <div class="space-x-4 mt-2">
          <%= link_to "Mentions l√©gales", mentions_legales_path, class: "underline hover:text-green-600" %>
          <%= link_to "Politique de confidentialit√©", politique_confidentialite_path, class: "underline hover:text-green-600" %>
        </div>
      </footer>

      <!-- Bouton retour haut -->
      <button id="backToTop"
              class="fixed bottom-6 right-6 z-50 hidden bg-green-600 text-white px-4 py-3 rounded-full shadow-lg hover:bg-green-700 transition duration-300 text-sm sm:text-base flex items-center gap-2"
              onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
              title="Retour en haut">
        <span>üîù</span>
        <span class="hidden sm:inline">Haut</span>
      </button>

      <script>
        document.addEventListener("DOMContentLoaded", function () {
          const btn = document.getElementById("backToTop");
          window.addEventListener("scroll", function () {
            btn.classList.toggle("hidden", window.scrollY < 300);
          });
        });
      </script>
    </main>
  </body>
</html>

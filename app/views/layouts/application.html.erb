<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for(:title) || "Site Psy" %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "https://fonts.googleapis.com/css2?family=Lora&family=Playfair+Display:wght@600&display=swap", rel: "stylesheet" %>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <%= favicon_link_tag 'favicon.ico' %>



    <script>
      document.addEventListener("DOMContentLoaded", () => {
        AOS.init({ duration: 800, once: true });
      });
    </script>
  </head>

  <body class="bg-white text-gray-800">

<header class="fixed top-0 left-0 w-full z-50 bg-green-600 shadow-md text-white">
  <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between px-4 py-3 gap-2">
    <!-- Logo -->
    <div class="flex items-center space-x-2">
      <%= image_tag "logomaman.png", alt: "Logo ApsySE", class: "h-10 w-auto" %>
    </div>

    <!-- Navigation visible sur tous les √©crans -->
    <nav class="text-white py-4 z-50">
      <div class="flex justify-center space-x-6 font-title text-sm uppercase tracking-wide">
        <%= link_to "Accueil", root_path, class: "hover:underline transition duration-200" %>
        <%= link_to "Parcours", root_path(anchor: "parcours"), class: "hover:underline transition duration-200" %>
        <%= link_to "Outils", root_path(anchor: "outils"), class: "hover:underline transition duration-200" %>
        <%= link_to "Le cabinet", root_path(anchor: "cabinet"), class: "hover:underline transition duration-200" %>
        <%= link_to "Contact", root_path(anchor: "contact"), class: "hover:underline transition duration-200" %>
      </div>
    </nav>





  </div>
</header>



    <main class="main-container">

      <%= yield %>

    </main>
      <% if notice %>
        <p class="flash-notice text-center text-white bg-green-500 py-2"><%= notice %></p>
      <% end %>
      <% if alert %>
        <p class="alert text-center text-white bg-red-500 py-2"><%= alert %></p>
      <% end %>
    <script>
      document.addEventListener("turbo:load", () => {
        const flash = document.querySelector(".flash-notice");
        if (flash) {
          setTimeout(() => {
            flash.style.transition = "opacity 0.8s ease-out";
            flash.style.opacity = "0";
            setTimeout(() => flash.remove(), 800);
          }, 4000);
        }
      });
    </script>
    <style>
  .frange-parallax {
    height: 300px;
    width: 100%;
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
    z-index: -1;
  }
</style>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const flashNotice = document.querySelector('.flash-notice');
    if (flashNotice && flashNotice.innerText.toLowerCase().includes("message a bien √©t√© envoy√©")) {
      confetti({
        particleCount: 200,
        spread: 70,
        origin: { y: 0.6 }
      });

      setTimeout(() => {
        flashNotice.style.transition = "opacity 0.8s ease-out";
        flashNotice.style.opacity = "0";
        setTimeout(() => flashNotice.remove(), 800);
      }, 3000); // 3 secondes
    }
  });
</script>

<footer class="bg-white border-t border-gray-200 text-center text-sm text-green-800 py-6 shadow-inner">
  <p class="mb-1">
    Site r√©alis√© par
    <a href="https://www.linkedin.com/in/sami-chabane-085881151/" target="_blank" rel="noopener" class="text-green-600 font-semibold hover:underline">
      Sami Chabane
    </a> ‚Äî D√©veloppeur web full stack üíª
  </p>
  <p class="mb-1">
    &copy; <%= Time.current.year %> Fr√©d√©rique Granjon ‚Äî Tous droits r√©serv√©s.
  </p>
  <p class="mb-1">
    SIRET : <span class="font-semibold">81917677700012</span>
  </p>
  <div class="space-x-4 mt-2">
    <%= link_to "Mentions l√©gales", mentions_legales_path, class: "underline hover:text-green-600" %>
    <%= link_to "Politique de confidentialit√©", politique_confidentialite_path, class: "underline hover:text-green-600" %>
  </div>
</footer>

<!-- Bouton retour en haut -->
<button id="backToTop"
        class="fixed bottom-6 right-6 z-50 hidden bg-green-600 text-white px-4 py-3 rounded-full shadow-lg hover:bg-green-700 transition duration-300 text-sm sm:text-base flex items-center gap-2"
        onclick="window.scrollTo({ top: 0, behavior: 'smooth' })"
        title="Retour en haut">
  <span>üîù</span>
  <span class="hidden sm:inline">Haut</span>
</button>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("backToTop");

    window.addEventListener("scroll", function () {
      if (window.scrollY > 300) {
        btn.classList.remove("hidden");
      } else {
        btn.classList.add("hidden");
      }
    });
  });
</script>

  </body>
</html>
